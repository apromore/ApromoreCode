<?xml version="1.0" encoding="utf-8"?>
<!--
  ~ Copyright Â© 2009-2018 The Apromore Initiative.
  ~
  ~ This file is part of "Apromore".
  ~
  ~ "Apromore" is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation; either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ "Apromore" is distributed in the hope that it will be useful, but
  ~ WITHOUT ANY WARRANTY; without even the implied warranty
  ~ of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  ~ See the GNU Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public
  ~ License along with this program.
  ~ If not, see <http://www.gnu.org/licenses/lgpl-3.0.html>.
  -->

<project name="Apromore - Eclipse Virgo Deployment" default="deploy-virgo">

    <description>
        Supports deployment of Apromore to Eclipse Virgo.
    </description>

    <!-- Folders used to build and deploy dependencies for Apromore. -->
    <property name="dir-sups" location="${basedir}/Supplements"/>
    <property name="dir-sups-lib" location="${dir-sups}/libraries"/>
    <property name="dir-extras" location="${basedir}/Apromore-Extras"/>
    <property name="dir-extras-build-tools" location="${dir-extras}/Build-Tools"/>
    <property name="dir-extras-test-tools" location="${dir-extras}/Test-Tools"/>

    <!--  URL of the automatically downloaded and installed Eclipse Virgo -->
    <property name="virgo-url" value="https://github.com/apromore/ApromoreDev/blob/master/software/virgo-tomcat-server-3.6.4.RELEASE.zip?raw=true"/>
    <property name="dir-deployment" location="${basedir}/Apromore-Assembly"/>
    <property name="dir-virgo" location="${dir-deployment}/virgo-tomcat-server-3.6.4.RELEASE"/>

    <!-- Locations of all the plugins. as they should be separate to the Web App PAR. -->
    <property name="dir-plugins" location="${basedir}/Apromore-Plugins/"/>
    <property name="dir-annotation" location="${basedir}/Apromore-Plugins/plugin-annotation/"/>
    <property name="dir-canoniser" location="${basedir}/Apromore-Plugins/plugin-canoniser/"/>
    <property name="dir-editor-plugins" location="${basedir}/Apromore-Plugins/plugin-editor/"/>
    <property name="dir-logic-plugins" location="${basedir}/Apromore-Plugins/plugin-logic/"/>
    <property name="dir-portal-plugins" location="${basedir}/Apromore-Plugins/plugin-portal/"/>
    <property name="dir-portal-templates" location="${basedir}/Apromore-Plugins/plugin-templates/"/>
    <property name="dir-deploy" location="${basedir}/Apromore-Plugins/plugin-deployment/"/>
    <property name="dir-osgi" location="${basedir}/Apromore-OSGI-Bundles/"/>

    <fileset id="pickupRepoStandAlone" dir=".">
        <include name="Apromore-Assembly/Manager-Assembly/src/main/resources/100-manager.plan"/>
        <include name="Apromore-Assembly/Portal-Assembly/src/main/resources/101-portal.plan"/>
        <include name="Apromore-Assembly/Filestore-Assembly/src/main/resources/102-filestore.plan"/>

        <include name="Apromore-Assembly/Editor-Assembly/src/main/resources/104-editor.plan"/>

        <include name="Apromore-Custom-Plugins/BIMP-Annotation-Logic/target/bimp-annotation-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/BIMP-Editor-Plugin/target/bimp-editor-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/BIMP-Editor-Plugin2/target/bimp-editor-plugin2-1.0.war"/>
        <include name="Apromore-Custom-Plugins/BIMP-Portal-Plugin/target/bimp-portal-plugin-1.0.jar"/>

        <include name="Apromore-Custom-Plugins/BPMNDiagramImporter-Logic/target/bpmndiagramimporter-logic-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Cmapper-Portal-Plugin/target/cmapper-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/Compare-Logic/target/compare-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Compare-Portal-Plugin/target/compareBP-portal-plugin-1.1.war"/>
        <include name="Apromore-Custom-Plugins/Compare-Portal-Plugin2/target/compareBP-portal-plugin2-1.1.war"/>

        <include name="Apromore-Custom-Plugins/LTL-Conf-Logic/target/ltl-conf-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/LTL-Conf-Portal-Plugin/target/ltl-conf-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/APM-Logic/target/apm-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Portal-Plugin/target/apm-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/APM-Compliance-Logic/target/apm-compliance-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Compliance-Portal-Plugin/target/apm-compliance-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/APM-Comp-Guards-Logic/target/apm-comp-guards-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Comp-Guards-Portal-Plugin/target/apm-comp-guards-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/IBPStruct-Logic/target/ibpstruct-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/IBPStruct-Portal-Plugin/target/ibpstruct-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Activity-Filter-Logic/target/activity-filter-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Activity-Filter-Portal-Plugin/target/activity-filter-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Infrequent-Behaviour-Filter-Logic/target/infrequent-behaviour-filter-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Infrequent-Behaviour-Filter-Portal-Plugin/target/infrequent-behaviour-filter-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Predictive-Monitor-Logic/target/predictive-monitor-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/Predictive-Monitor-Portal-Plugin/target/predictive-monitor-portal-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/Predictor-Training-Portal-Plugin/target/predictor-training-portal-plugin-1.0.war"/>

        <include name="Apromore-Custom-Plugins/Log-Animation-Logic/target/log-animation-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/Log-Animation-Portal-Plugin/target/log-animation-portal-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/Log-Animation-Portal-Plugin2/target/log-animation-portal-plugin2-1.0.war"/>

        <include name="Apromore-Custom-Plugins/Log-Visualizer-Logic/target/log-visualizer-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Log-Visualizer-Logic-WS/target/log-visualizer-logic-ws-1.1.war"/>
        <!--<include name="Apromore-Custom-Plugins/Log-Visualizer-Portal-Plugin/target/log-visualizer-portal-plugin-1.1.jar"/>-->

        <include name="Apromore-Custom-Plugins/Metrics-Logic/target/metrics-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Metrics-Portal-Plugin/target/metrics-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/BEBoP-Logic/target/gbebop-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/BEBoP-Portal-Plugin/target/gbebop-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/BProVe-Logic/target/gbprove-logic-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/PerformanceMiner-Logic/target/perfmining-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/PerformanceMiner-Portal-Plugin/target/perfmining-portal-plugin-1.0.jar"/>

        <include name="Apromore-Custom-Plugins/ProDrift-Logic/target/prodrift-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/ProDrift-Portal-Plugin/target/prodrift-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Quaestio-Portal-Plugin/target/quaestio-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/Similarity-Clusters-Portal-Plugin/target/similarity-clusters-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/StageMining-Logic/target/stagemining-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/StageMining-Portal-Plugin/target/stagemining-portal-plugin-1.1.jar"/>

        <!-- <include name="Supplements/ow2-bundles-externals-opencsv-1.0.36.jar"/> -->
        <!-- <include name="Supplements/process-discoverer-1.0.20181204.jar"/> -->
        <include name="Apromore-Core-Co^mponents/Apromore-BPMNEditor/target/apromore-bpmneditor-1.1.war"/>
    </fileset>

    <fileset id="pickupRepoServer" dir=".">
        <include name="Apromore-Assembly/Manager-Assembly/src/main/resources/100-manager.plan"/>
        <include name="Apromore-Assembly/Portal-Assembly/src/main/resources/101-portal.plan"/>
        <include name="Apromore-Assembly/Filestore-Assembly/src/main/resources/102-filestore.plan"/>

        <include name="Apromore-Assembly/Editor-Assembly/src/main/resources/104-editor.plan"/>

        <include name="Apromore-Custom-Plugins/BIMP-Annotation-Logic/target/bimp-annotation-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/BIMP-Editor-Plugin/target/bimp-editor-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/BIMP-Editor-Plugin2/target/bimp-editor-plugin2-1.0.war"/>
        <include name="Apromore-Custom-Plugins/BIMP-Portal-Plugin/target/bimp-portal-plugin-1.0.jar"/>

        <include name="Apromore-Custom-Plugins/BPMNDiagramImporter-Logic/target/bpmndiagramimporter-logic-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Cmapper-Portal-Plugin/target/cmapper-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/Compare-Logic/target/compare-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Compare-Portal-Plugin/target/compareBP-portal-plugin-1.1.war"/>
        <include name="Apromore-Custom-Plugins/Compare-Portal-Plugin2/target/compareBP-portal-plugin2-1.1.war"/>

        <include name="Apromore-Custom-Plugins/LTL-Conf-Logic/target/ltl-conf-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/LTL-Conf-Portal-Plugin/target/ltl-conf-portal-plugin-1.1.war"/>
        
        <include name="Apromore-Custom-Plugins/APM-Logic/target/apm-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Portal-Plugin/target/apm-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/APM-Compliance-Logic/target/apm-compliance-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Compliance-Portal-Plugin/target/apm-compliance-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/APM-Comp-Guards-Logic/target/apm-comp-guards-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Comp-Guards-Portal-Plugin/target/apm-comp-guards-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/IBPStruct-Logic/target/ibpstruct-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/IBPStruct-Portal-Plugin/target/ibpstruct-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Activity-Filter-Logic/target/activity-filter-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Activity-Filter-Portal-Plugin/target/activity-filter-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Infrequent-Behaviour-Filter-Logic/target/infrequent-behaviour-filter-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Infrequent-Behaviour-Filter-Portal-Plugin/target/infrequent-behaviour-filter-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Predictive-Monitor-Logic/target/predictive-monitor-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/Predictive-Monitor-Portal-Plugin/target/predictive-monitor-portal-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/Predictor-Training-Portal-Plugin/target/predictor-training-portal-plugin-1.0.war"/>

        <include name="Apromore-Custom-Plugins/Log-Animation-Logic/target/log-animation-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/Log-Animation-Portal-Plugin/target/log-animation-portal-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/Log-Animation-Portal-Plugin2/target/log-animation-portal-plugin2-1.0.war"/>

        <include name="Apromore-Custom-Plugins/Log-Visualizer-Logic/target/log-visualizer-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Log-Visualizer-Logic-WS/target/log-visualizer-logic-ws-1.1.war"/>
        <!--<include name="Apromore-Custom-Plugins/Log-Visualizer-Portal-Plugin/target/log-visualizer-portal-plugin-1.1.jar"/>-->

        <include name="Apromore-Custom-Plugins/Metrics-Logic/target/metrics-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Metrics-Portal-Plugin/target/metrics-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/BEBoP-Logic/target/gbebop-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/BEBoP-Portal-Plugin/target/gbebop-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/BProVe-Logic/target/gbprove-logic-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/PerformanceMiner-Logic/target/perfmining-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/PerformanceMiner-Portal-Plugin/target/perfmining-portal-plugin-1.0.jar"/>

        <include name="Apromore-Custom-Plugins/ProDrift-Logic/target/prodrift-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/ProDrift-Portal-Plugin/target/prodrift-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Quaestio-Portal-Plugin/target/quaestio-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/Similarity-Clusters-Portal-Plugin/target/similarity-clusters-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/StageMining-Logic/target/stagemining-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/StageMining-Portal-Plugin/target/stagemining-portal-plugin-1.1.jar"/>

        <!-- <include name="Supplements/ow2-bundles-externals-opencsv-1.0.36.jar"/> -->
        <!-- <include name="Supplements/process-discoverer-1.0.20181204.jar"/> -->

        <!-- After creating the PQL tables in MySQL, uncomment these components to enable PQL indexing and querying
        -->
        <include name="Apromore-Custom-Plugins/APQL-Portal-Plugin/target/apql-portal-plugin-1.1.war"/>
        <include name="Apromore-Assembly/PQL-Indexer-Assembly/src/main/resources/103-pql-indexer.plan"/>
        <include name="Apromore-Custom-Plugins/PQL-Logic/target/pql-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/PQL-Logic-WS/target/pql-logic-ws-1.1.war"/>
        <include name="Apromore-Custom-Plugins/PQL-Portal-Plugin/target/pql-portal-plugin-1.1.jar"/>

        <include name="Apromore-Core-Components/Apromore-BPMNEditor/target/apromore-bpmneditor-1.1.war"/>
    </fileset>

    <fileset id="pickupRepo" dir=".">
        <include name="Apromore-Assembly/Manager-Assembly/src/main/resources/100-manager.plan"/>
        <include name="Apromore-Assembly/Portal-Assembly/src/main/resources/101-portal.plan"/>
        <include name="Apromore-Assembly/Filestore-Assembly/src/main/resources/102-filestore.plan"/>

        <include name="Apromore-Assembly/Editor-Assembly/src/main/resources/104-editor.plan"/>

        <include name="Apromore-Custom-Plugins/BIMP-Annotation-Logic/target/bimp-annotation-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/BIMP-Editor-Plugin/target/bimp-editor-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/BIMP-Portal-Plugin/target/bimp-portal-plugin-1.0.jar"/>

        <include name="Apromore-Custom-Plugins/BPMNDiagramImporter-Logic/target/bpmndiagramimporter-logic-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Cmapper-Portal-Plugin/target/cmapper-portal-plugin-1.1.war"/>

        <!-- BPMNMiner renamed ~BPMNMiner elsewhere as a workaround for its dependency on IBPStruct
        <include name="Apromore-Custom-Plugins/BPMNMiner-Logic/target/bpmnminer-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/BPMNMiner-Portal-Plugin/target/bpmnminer-portal-plugin-1.1.jar"/>
        -->

        <include name="Apromore-Custom-Plugins/Compare-Logic/target/compare-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Compare-Portal-Plugin/target/compareBP-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/CSVImporter-Logic/target/csvimporter-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/CSVImporter-Portal-Plugin/target/csvimporter-portal-plugin-1.0.jar"/>

        <include name="Apromore-Custom-Plugins/LTL-Conf-Logic/target/ltl-conf-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/LTL-Conf-Portal-Plugin/target/ltl-conf-portal-plugin-1.1.war"/>
        
        <include name="Apromore-Custom-Plugins/APM-Logic/target/apm-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Portal-Plugin/target/apm-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/APM-Compliance-Logic/target/apm-compliance-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Compliance-Portal-Plugin/target/apm-compliance-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/APM-Comp-Guards-Logic/target/apm-comp-guards-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Comp-Guards-Portal-Plugin/target/apm-comp-guards-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/IBPStruct-Logic/target/ibpstruct-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/IBPStruct-Portal-Plugin/target/ibpstruct-portal-plugin-1.1.jar"/>
        <!-- ibpstruct-editor-plugin renamed ~ibpstruct-editor-plugin elsewhere as a workaround for its dependency upon ibpstruct-logic
        <include name="Apromore-Plugins/plugin-editor/ibpstruct/target/ibpstruct-editor-plugin-1.1.war"/>
        -->

        <include name="Apromore-Custom-Plugins/Activity-Filter-Logic/target/activity-filter-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Activity-Filter-Portal-Plugin/target/activity-filter-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Infrequent-Behaviour-Filter-Logic/target/infrequent-behaviour-filter-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Infrequent-Behaviour-Filter-Portal-Plugin/target/infrequent-behaviour-filter-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Predictive-Monitor-Logic/target/predictive-monitor-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/Predictive-Monitor-Portal-Plugin/target/predictive-monitor-portal-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/Predictor-Training-Portal-Plugin/target/predictor-training-portal-plugin-1.0.war"/>

        <include name="Apromore-Custom-Plugins/Log-Animation-Logic/target/log-animation-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/Log-Animation-Portal-Plugin/target/log-animation-portal-plugin-1.0.war"/>
		<include name="Apromore-Custom-Plugins/Log-Animation-Portal-Plugin2/target/log-animation-portal-plugin2-1.0.war"/>

        <include name="Apromore-Custom-Plugins/Log-Visualizer-Logic/target/log-visualizer-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Log-Visualizer-Logic-WS/target/log-visualizer-logic-ws-1.1.war"/>
        <!--<include name="Apromore-Custom-Plugins/Log-Visualizer-Portal-Plugin/target/log-visualizer-portal-plugin-1.1.jar"/>-->

        <include name="Apromore-Custom-Plugins/Metrics-Logic/target/metrics-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Metrics-Portal-Plugin/target/metrics-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/BEBoP-Logic/target/gbebop-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/BEBoP-Portal-Plugin/target/gbebop-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/BProVe-Logic/target/gbprove-logic-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/PerformanceMiner-Logic/target/perfmining-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/PerformanceMiner-Portal-Plugin/target/perfmining-portal-plugin-1.0.jar"/>

        <!-- logfilter-editor-plugin renamed ~logfilter-editor-plugin elsewhere as a workaround for its dependency upon logfilter-logic
        <include name="Apromore-Plugins/plugin-editor/logfilter/target/logfilter-editor-plugin-1.1.war"/>
        -->

        <include name="Apromore-Custom-Plugins/ProDrift-Logic/target/prodrift-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/ProDrift-Portal-Plugin/target/prodrift-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Quaestio-Portal-Plugin/target/quaestio-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/Similarity-Clusters-Portal-Plugin/target/similarity-clusters-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/StageMining-Logic/target/stagemining-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/StageMining-Portal-Plugin/target/stagemining-portal-plugin-1.1.jar"/>
		
		<include name="Apromore-Custom-Plugins/Process-Discoverer-Plugin/target/process-discoverer-1.0.0.war"/>

        <!--<include name="Supplements/ow2-bundles-externals-opencsv-1.0.36.jar"/> -->
        <!-- <include name="Supplements/process-discoverer-1.0.20181204.jar"/> -->

        <!-- After creating the PQL tables in MySQL, uncomment these components to enable PQL indexing and querying
        <include name="Apromore-Custom-Plugins/APQL-Portal-Plugin/target/apql-portal-plugin-1.1.war"/>
        <include name="Apromore-Assembly/PQL-Indexer-Assembly/src/main/resources/103-pql-indexer.plan"/>
        <include name="Apromore-Custom-Plugins/PQL-Logic/target/pql-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/PQL-Logic-WS/target/pql-logic-ws-1.1.war"/>
        <include name="Apromore-Custom-Plugins/PQL-Portal-Plugin/target/pql-portal-plugin-1.1.jar"/>
        -->

        <include name="Apromore-Core-Components/Apromore-BPMNEditor/target/apromore-bpmneditor-1.1.war"/>
        <include name="Apromore-Custom-Plugins/Compare-Portal-Plugin2/target/compareBP-portal-plugin2-1.1.war"/>
        <include name="Apromore-Custom-Plugins/BIMP-Editor-Plugin2/target/bimp-editor-plugin2-1.0.war"/>
    </fileset>

    <fileset id="pickupRepo-student" dir=".">
        <include name="Apromore-Assembly/Manager-Assembly/src/main/resources/100-manager.plan"/>
        <include name="Apromore-Assembly/Portal-Assembly/src/main/resources/101-portal.plan"/>
        <include name="Apromore-Assembly/Filestore-Assembly/src/main/resources/102-filestore.plan"/>
        <include name="Apromore-Assembly/Editor-Assembly/src/main/resources/104-editor-student.plan"/>

        <include name="Apromore-Custom-Plugins/BIMP-Annotation-Logic/target/bimp-annotation-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/BIMP-Editor-Plugin/target/bimp-editor-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/BIMP-Portal-Plugin/target/bimp-portal-plugin-1.0.jar"/>

        <include name="Apromore-Custom-Plugins/BPMNDiagramImporter-Logic/target/bpmndiagramimporter-logic-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Cmapper-Portal-Plugin/target/cmapper-portal-plugin-1.1.war"/>

        <!-- BPMNMiner renamed ~BPMNMiner elsewhere as a workaround for its dependency on IBPStruct
        <include name="Apromore-Custom-Plugins/BPMNMiner-Logic/target/bpmnminer-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/BPMNMiner-Portal-Plugin/target/bpmnminer-portal-plugin-1.1.jar"/>
        -->

        <include name="Apromore-Custom-Plugins/Compare-Logic/target/compare-logic-1.1.jar"/>
        <!--Switch off Signavio-based plugins <include name="Apromore-Custom-Plugins/Compare-Portal-Plugin/target/compareBP-portal-plugin-1.1.war"/>-->

        <include name="Apromore-Custom-Plugins/LTL-Conf-Logic/target/ltl-conf-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/LTL-Conf-Portal-Plugin/target/ltl-conf-portal-plugin-1.1.war"/>
        
        <include name="Apromore-Custom-Plugins/APM-Logic/target/apm-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Portal-Plugin/target/apm-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/APM-Compliance-Logic/target/apm-compliance-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Compliance-Portal-Plugin/target/apm-compliance-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/APM-Comp-Guards-Logic/target/apm-comp-guards-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/APM-Comp-Guards-Portal-Plugin/target/apm-comp-guards-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/IBPStruct-Logic/target/ibpstruct-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/IBPStruct-Portal-Plugin/target/ibpstruct-portal-plugin-1.1.jar"/>
        <!-- ibpstruct-editor-plugin renamed ~ibpstruct-editor-plugin elsewhere as a workaround for its dependency upon ibpstruct-logic
        <include name="Apromore-Plugins/plugin-editor/ibpstruct/target/ibpstruct-editor-plugin-1.1.war"/>
        -->

        <include name="Apromore-Custom-Plugins/Activity-Filter-Logic/target/activity-filter-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Activity-Filter-Portal-Plugin/target/activity-filter-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Infrequent-Behaviour-Filter-Logic/target/infrequent-behaviour-filter-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Infrequent-Behaviour-Filter-Portal-Plugin/target/infrequent-behaviour-filter-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Predictive-Monitor-Logic/target/predictive-monitor-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/Predictive-Monitor-Portal-Plugin/target/predictive-monitor-portal-plugin-1.0.war"/>
        <include name="Apromore-Custom-Plugins/Predictor-Training-Portal-Plugin/target/predictor-training-portal-plugin-1.0.war"/>

        <include name="Apromore-Custom-Plugins/Log-Animation-Logic/target/log-animation-logic-1.0.jar"/>


        <!-- Do not switch off this Signavio-based plugin because Process Discoverer depends on it -->
        <include name="Apromore-Custom-Plugins/Log-Animation-Portal-Plugin/target/log-animation-portal-plugin-1.0.war"/>
		
        <!-- <include name="Apromore-Custom-Plugins/Log-Visualizer-Logic/target/log-visualizer-logic-1.1.jar"/> -->
        <!-- <include name="Apromore-Custom-Plugins/Log-Visualizer-Logic-WS/target/log-visualizer-logic-ws-1.1.war"/> -->
        <!-- <include name="Apromore-Custom-Plugins/Log-Visualizer-Portal-Plugin/target/log-visualizer-portal-plugin-1.1.jar"/> -->

        <include name="Apromore-Custom-Plugins/Metrics-Logic/target/metrics-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/Metrics-Portal-Plugin/target/metrics-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/BEBoP-Logic/target/gbebop-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/BEBoP-Portal-Plugin/target/gbebop-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/BProVe-Logic/target/gbprove-logic-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/PerformanceMiner-Logic/target/perfmining-logic-1.0.jar"/>
        <include name="Apromore-Custom-Plugins/PerformanceMiner-Portal-Plugin/target/perfmining-portal-plugin-1.0.jar"/>

        <!-- logfilter-editor-plugin renamed ~logfilter-editor-plugin elsewhere as a workaround for its dependency upon logfilter-logic
        <include name="Apromore-Plugins/plugin-editor/logfilter/target/logfilter-editor-plugin-1.1.war"/>
        -->

        <include name="Apromore-Custom-Plugins/ProDrift-Logic/target/prodrift-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/ProDrift-Portal-Plugin/target/prodrift-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/Quaestio-Portal-Plugin/target/quaestio-portal-plugin-1.1.war"/>

        <include name="Apromore-Custom-Plugins/Similarity-Clusters-Portal-Plugin/target/similarity-clusters-portal-plugin-1.1.jar"/>

        <include name="Apromore-Custom-Plugins/StageMining-Logic/target/stagemining-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/StageMining-Portal-Plugin/target/stagemining-portal-plugin-1.1.jar"/>
		
		<include name="Apromore-Custom-Plugins/Process-Discoverer-Plugin/target/process-discoverer-1.0.0.war"/>

		<!--
        <include name="Supplements/ow2-bundles-externals-opencsv-1.0.36.jar"/>
        <include name="Supplements/process-discoverer-1.0.20181204.jar"/>
		-->

        <!-- After creating the PQL tables in MySQL, uncomment these components to enable PQL indexing and querying
        <include name="Apromore-Custom-Plugins/APQL-Portal-Plugin/target/apql-portal-plugin-1.1.war"/>
        <include name="Apromore-Assembly/PQL-Indexer-Assembly/src/main/resources/103-pql-indexer.plan"/>
        <include name="Apromore-Custom-Plugins/PQL-Logic/target/pql-logic-1.1.jar"/>
        <include name="Apromore-Custom-Plugins/PQL-Logic-WS/target/pql-logic-ws-1.1.war"/>
        <include name="Apromore-Custom-Plugins/PQL-Portal-Plugin/target/pql-portal-plugin-1.1.jar"/>
        -->

        <include name="Apromore-Core-Components/Apromore-BPMNEditor/target/apromore-bpmneditor-1.1.war"/>
        <include name="Apromore-Custom-Plugins/Compare-Portal-Plugin2/target/compareBP-portal-plugin2-1.1.war"/>
        <include name="Apromore-Custom-Plugins/BIMP-Editor-Plugin2/target/bimp-editor-plugin2-1.0.war"/>
        <!-- <include name="Apromore-Custom-Plugins/Log-Animation-Portal-Plugin2/target/log-animation-portal-plugin2-1.0.war"/> -->
    </fileset>

    <fileset id="usrRepo" dir=".">
        <include name="Apromore-Assembly/**/repository/usr/*.jar"/>
        <include name="Apromore-Assembly/**/repository/usr/*.war"/>
        <include name="site.properties"/>
        <include name="git.properties"/>
    </fileset>

    <!-- Virgo Related -->
    <target name="setup-virgo" depends="download-virgo, configure-virgo"/>

    <target name="check-virgo">
        <condition property="virgo.installed">
            <available file="${dir-virgo}" type="dir"/>
        </condition>
    </target>

    <target name="download-virgo" depends="check-virgo" unless="virgo.installed">
        <mkdir dir="${dir-deployment}"/>
        <get src="${virgo-url}" dest="${dir-deployment}/virgo.zip"/>
        <unzip src="${dir-deployment}/virgo.zip" dest="${dir-deployment}"/>
        <delete file="${dir-deployment}/virgo.zip"/>
    </target>

    <target name="configure-virgo" depends="check-virgo">
        <copy todir="${dir-virgo}/bin" overwrite="true">
            <fileset dir="Supplements/Virgo">
                <filename name="dmk.sh"/>
            </fileset>
        </copy>
        <copy todir="${dir-virgo}/bin" overwrite="true">
            <fileset dir="Supplements/Virgo">
                <filename name="dmk.bat"/>
            </fileset>
        </copy>
        <copy todir="${dir-virgo}/repository/ext" overwrite="true">
            <fileset dir="Supplements/Virgo">
                <filename name="org.eclipse.virgo.web.properties"/>
            </fileset>
        </copy>
        <copy todir="${dir-virgo}/configuration" overwrite="true">
            <fileset dir="Supplements/Virgo">
                <include name="tomcat-server.xml"/>
                <include name="java6-server.profile"/>
            </fileset>
        </copy>
        <delete file="${dir-virgo}/pickup/org.eclipse.virgo.apps.splash_3.6.4.RELEASE.jar" />
        <chmod file="${dir-virgo}/bin/*.sh" perm="ugo+rx" osfamily="unix"/>
    </target>

    <target name="clean-virgo" depends="check-virgo" if="virgo.installed">
        <delete includeemptydirs="true">
            <fileset dir="${dir-virgo}">
                <include name="repository/usr/*.jar"/>
            </fileset>
        </delete>
        <delete includeemptydirs="true">
            <fileset dir="${dir-virgo}">
                <include name="logs/*"/>
            </fileset>
        </delete>
        <delete includeemptydirs="true">
            <fileset dir="${dir-virgo}">
                <include name="pickup/*.jar"/>
                <include name="pickup/*.war"/>
                <include name="pickup/*.par"/>
                <include name="pickup/*.plan"/>
                <exclude name="pickup/org.eclipse.virgo.apps.repository_3.6.4.RELEASE.par"/>
                <exclude name="pickup/org.eclipse.virgo.management.console_3.6.4.RELEASE.jar"/>
            </fileset>
        </delete>
    </target>

    <target name="dist-virgo" depends="clean-virgo, setup-virgo, copy-virgo, deploy-virgo">
        <zip destfile="Apromore.zip" includes="${dir-virgo}/*"/>
    </target>

    <target name="deploy-virgo" depends="clean-virgo, setup-virgo, copy-virgo"/>

    <target name="set-permissions" depends="setup-virgo">
        <chmod file="${dir-virgo}/bin/*.sh" perm="ugo+rx" osfamily="unix"/>
    </target>

    <target name="clean-start-virgo" depends="set-permissions">
        <exec dir="${dir-virgo}/bin/" executable="cmd" osfamily="windows">
            <arg value="/c"/>
            <arg value="startup.bat"/>
            <arg line="-clean"/>
        </exec>
        <exec dir="${dir-virgo}/bin/" executable="./startup.sh" osfamily="unix">
            <arg line="-clean"/>
        </exec>
    </target>

    <target name="start-virgo" depends="set-permissions,copy-virgo">
        <exec dir="${dir-virgo}/bin/" executable="cmd" osfamily="windows">
            <arg value="/c"/>
            <arg value="startup.bat"/>
            <arg line="-clean"/>
        </exec>
        <exec dir="${dir-virgo}/bin/" executable="./startup.sh" osfamily="unix">
            <arg line="-clean"/>
        </exec>
    </target>

    <target name="start-virgo-student" depends="set-permissions,copy-virgo-student">
        <exec dir="${dir-virgo}/bin/" executable="cmd" osfamily="windows">
            <arg value="/c"/>
            <arg value="startup.bat"/>
            <arg line="-clean"/>
        </exec>
        <exec dir="${dir-virgo}/bin/" executable="./startup.sh" osfamily="unix">
            <arg line="-clean"/>
        </exec>
    </target>

    <target name="start-virgo-standalone" depends="set-permissions,copy-virgo-standalone,delete-standalone">
        <exec dir="${dir-virgo}/bin/" executable="cmd" osfamily="windows">
            <arg value="/c"/>
            <arg value="startup.bat"/>
            <arg line="-clean"/>
        </exec>
        <exec dir="${dir-virgo}/bin/" executable="./startup.sh" osfamily="unix">
            <arg line="-clean"/>
        </exec>
    </target>

    <target name="start-virgo-oneclick" depends="set-permissions,copy-virgo,delete-oneclick">
        <exec dir="${dir-virgo}/bin/" executable="cmd" osfamily="windows">
            <arg value="/c"/>
            <arg value="startup.bat"/>
            <arg line="-clean"/>
        </exec>
        <exec dir="${dir-virgo}/bin/" executable="./startup.sh" osfamily="unix">
            <arg line="-clean"/>
        </exec>
    </target>

    <target name="debug-virgo" depends="set-permissions,copy-virgo">
        <exec dir="${dir-virgo}/bin/" executable="cmd" osfamily="windows">
            <arg value="/c"/>
            <arg value="startup.bat"/>
            <arg line="-clean -debug 8002"/>
        </exec>
        <exec dir="${dir-virgo}/bin/" executable="./startup.sh" osfamily="unix">
            <arg line="-clean -debug"/>
        </exec>
    </target>

    <target name="debug" depends="set-permissions">
        <exec dir="${dir-virgo}/bin/" executable="cmd" osfamily="windows">
            <arg value="/c"/>
            <arg value="startup.bat"/>
            <arg line="-clean -debug"/>
        </exec>
        <exec dir="${dir-virgo}/bin/" executable="./startup.sh" osfamily="unix">
            <arg line="-clean -debug"/>
        </exec>
    </target>

    <target name="stop-virgo" depends="setup-virgo">
        <exec dir="${dir-virgo}/bin/" executable="cmd" osfamily="windows">
            <arg value="/c"/>
            <arg value="shutdown.bat"/>
        </exec>
        <exec dir="${dir-virgo}/bin/" executable="./shutdown.sh" osfamily="unix">
        </exec>
    </target>

    <target name="delete-standalone">
        <delete file="${dir-virgo}/pickup/100-manager.plan"/>
        <delete file="${dir-virgo}/pickup/101-portal.plan"/>
        <delete file="${dir-virgo}/pickup/102-filestore.plan"/>
        <delete file="${dir-virgo}/pickup/104-editor.plan"/>
        <copy file="Apromore-Assembly/Manager-Assembly/src/main/resources/100-manager.plan2" tofile="${dir-virgo}/pickup/100-manager.plan" overwrite="true"/>
        <copy file="Apromore-Assembly/Portal-Assembly/src/main/resources/101-portal.plan2" tofile="${dir-virgo}/pickup/101-portal.plan" overwrite="true"/>
        <copy file="Apromore-Assembly/Editor-Assembly/src/main/resources/104-editor.plan2" tofile="${dir-virgo}/pickup/104-editor.plan" overwrite="true"/>
        <delete file="${dir-virgo}/pickup/annotation-epml-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/annotation-xpdl-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/annotation-yawl-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/apm-comp-guards-logic-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/apm-comp-guards-portal-plugin-1.1.war"/>
        <delete file="${dir-virgo}/pickup/apm-compliance-logic-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/apm-compliance-portal-plugin-1.1.war"/>
        <delete file="${dir-virgo}/pickup/apm-logic-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/apm-portal-plugin-1.1.war"/>
        <delete file="${dir-virgo}/pickup/bimp-editor-plugin-1.0.war"/>
        <delete file="${dir-virgo}/pickup/bimp-editor-plugin2-1.0.war"/>
        <delete file="${dir-virgo}/pickup/bimp-portal-plugin-1.0.jar"/>
        <delete file="${dir-virgo}/pickup/ibpstruct-portal-plugin-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/canoniser-aris-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/canoniser-epml-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/canoniser-xpdl-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/canoniser-yawl-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/cmapper-portal-plugin-1.1.war"/>
        <delete file="${dir-virgo}/pickup/gbebop-logic-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/gbebop-portal-plugin-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/gbprove-logic-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/ltl-conf-logic-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/ltl-conf-portal-plugin-1.1.war"/>
        <delete file="${dir-virgo}/pickup/perfmining-logic-1.0.jar"/>
        <delete file="${dir-virgo}/pickup/perfmining-portal-plugin-1.0.jar"/>
        <delete file="${dir-virgo}/pickup/prodrift-logic-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/prodrift-portal-plugin-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/quaestio-portal-plugin-1.1.war"/>
        <delete file="${dir-virgo}/pickup/similarity-clusters-portal-plugin-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/stagemining-logic-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/stagemining-portal-plugin-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/~ibpstruct-editor-plugin-1.1.war"/>
        <delete file="${dir-virgo}/pickup/~gbebop-editor-plugin-1.1.war"/>
        <delete file="${dir-virgo}/pickup/~gbprove-editor-plugin-1.1.war"/>
        <delete file="${dir-virgo}/pickup/~metrics-editor-plugin2-1.1.war"/>
        <delete file="${dir-virgo}/pickup/apromore-bpmneditor-1.1.war"/>


        <delete file="${dir-virgo}/pickup/org.eclipse.virgo.apps.repository_3.6.4.RELEASE.par"/>
        <delete file="${dir-virgo}/pickup/org.eclipse.virgo.management.console_3.6.4.RELEASE.jar"/>

        <delete file="${dir-virgo}/repository/usr/antlr4-runtime-osgi-4.3.jar"/>
        <delete file="${dir-virgo}/repository/usr/bpmnminer-commandline-1.0.20180315.jar"/>
        <delete file="${dir-virgo}/repository/usr/bpmnminer-commandline-1.0.20180315.jar"/>
        <delete file="${dir-virgo}/repository/usr/noisefiltering-event-commandline-1.0.20180315.jar"/>
        <delete file="${dir-virgo}/repository/usr/pn-automata-conv-osgi-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/prom-pnml-osgi-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/prom5-lib-6.5.20170418.jar"/>
        <delete file="${dir-virgo}/repository/usr/themis-osgi-1.0.jar"/>

        <delete file="${dir-virgo}/repository/usr/log4j-1.2.17.jar"/>
        <delete file="${dir-virgo}/repository/usr/log4j-over-slf4j-1.7.12.jar"/>
        <delete file="${dir-virgo}/repository/usr/logback-classic-1.0.13.jar"/>

        <delete file="${dir-virgo}/repository/usr/apm-verification-osgi-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/apromore-filestore-1.1.war"/>
        <delete file="${dir-virgo}/repository/usr/apromore-pql-indexer-1.1.war"/>
        <delete file="${dir-virgo}/repository/usr/declare-visualizer-osgi-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/editor-platform-extension-epc-1.2.jar"/>
        <delete file="${dir-virgo}/repository/usr/editor-platform-extension-petrinet-1.2.jar"/>
        <delete file="${dir-virgo}/repository/usr/editor-platform-extension-xpdl-1.2.jar"/>
        <delete file="${dir-virgo}/repository/usr/editor-platform-extension-yawl-1.2.jar"/>
        <delete file="${dir-virgo}/repository/usr/ltl-conf-check-osgi-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/ltl-to-automaton-osgi-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/pql-osgi-1.2.jar"/>
        <delete file="${dir-virgo}/repository/usr/prodrift-osgi-2.4.jar"/>
        <delete file="${dir-virgo}/repository/usr/aris-schema-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/cmap-schema-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/epml-schema-1.1.jar"/>

        <delete file="${dir-virgo}/repository/usr/rfl-schema-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/yawl-schema-1.1.jar"/>
    </target>

    <target name="delete-oneclick">
        <delete file="${dir-virgo}/pickup/annotation-yawl-1.1.jar"/>
        <delete file="${dir-virgo}/pickup/canoniser-yawl-1.1.jar"/>
        <delete file="${dir-virgo}/repository/usr/editor-platform-extension-yawl-1.2.jar"/>
        <!--<delete file="${dir-virgo}/repository/usr/yawl-schema-1.1.jar"/>-->
        <delete file="${dir-virgo}/pickup/104-editor.plan"/>
        <copy file="Apromore-Assembly/Editor-Assembly/src/main/resources/104-editor.plan1" tofile="${dir-virgo}/pickup/104-editor.plan" overwrite="true"/>
    </target>

    <target name="copy-virgo-standalone" depends="clean-virgo">
        <copy todir="${dir-virgo}/repository/usr" flatten="true" overwrite="true">
            <fileset dir="${dir-osgi}">
                <include name="**/target/eclipse-collections-osgi-1.1.jar"/>
                <include name="**/target/bpmntk-osgi-1.1.jar"/>
                <include name="**/target/similaritysearch-osgi-1.1.jar"/>
                <include name="**/target/eventstr-confchecking-osgi-1.1.jar"/>
                <include name="**/target/apm-verification-osgi-1.1.jar"/>
                <!--<include name="**/target/uma-bpdiff-osgi-1.1.jar"/>-->
                <include name="**/target/pn-automata-conv-osgi-1.1.jar"/>
                <include name="**/target/prom-pnml-osgi-1.1.jar"/>
                <include name="**/target/ltl-to-automaton-osgi-1.1.jar"/>
                <include name="**/target/declare-visualizer-osgi-1.1.jar"/>
                <!--<include name="**/target/pnapi-bpdiff-osgi-1.1.jar"/>-->
                <include name="**/target/raffaeleconforti-osgi-1.1.jar"/>
                <include name="**/target/ltl-conf-check-osgi-1.1.jar"/>
            </fileset>
            <!-- This bundle is a dependency for the eventstr-confchecking-code-osgi bundle, which is in turn used by Compare-Logic -->
            <fileset dir="Supplements/">
                <include name="org.apache.servicemix.bundles.gwt-dev-2.6.0_1.jar"/>
            </fileset>
        </copy>
        <copy todir="${dir-virgo}/repository/usr" flatten="true" overwrite="true">
            <fileset refid="usrRepo"/>
        </copy>
        <copy todir="${dir-virgo}/pickup" flatten="true" overwrite="true">
            <fileset refid="pickupRepoStandAlone"/>
        </copy>

        <!-- Force the BPMN Miner plugin to be alphabetically after the iBPStruct plugin it depends upon -->
        <copy file="BPMNMiner-Logic/target/bpmnminer-logic-1.1.jar" tofile="${dir-virgo}/pickup/~bpmnminer-logic-1.1.jar"/>
        <copy file="BPMNMiner-Portal-Plugin/target/bpmnminer-portal-plugin-1.1.jar" tofile="${dir-virgo}/pickup/~bpmnminer-portal-plugin-1.1.jar"/>

        <!-- Force the editor plugins to be alphabetically after the logic plugins they depends upon -->
        <copy file="Apromore-Plugins/plugin-editor/ibpstruct/target/ibpstruct-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~ibpstruct-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/metrics/target/metrics-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~metrics-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/metrics2/target/metrics-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~metrics-editor-plugin2-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/bebop/target/gbebop-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~gbebop-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/bprove/target/gbprove-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~gbprove-editor-plugin-1.1.war"/>

        <copy todir="${dir-virgo}/pickup" flatten="true" overwrite="true">
            <fileset dir="${dir-annotation}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-canoniser}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-logic-plugins}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-portal-plugins}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
                <exclude name="sample/target/*.jar"/>
            </fileset>
            <!--<fileset dir="${dir-deploy}">-->
                <!--<include name="**/target/*.jar"/>-->
                <!--<exclude name="**/target/*-sources.jar"/>-->
                <!--<exclude name="**/core/**/*.jar"/>-->
            <!--</fileset>-->
        </copy>
    </target>

    <target name="copy-virgo-server" depends="clean-virgo">
        <copy todir="${dir-virgo}/repository/usr" flatten="true" overwrite="true">
            <fileset dir="${dir-osgi}">
                <include name="**/target/eclipse-collections-osgi-1.1.jar"/>
                <include name="**/target/bpmntk-osgi-1.1.jar"/>
                <include name="**/target/similaritysearch-osgi-1.1.jar"/>
                <include name="**/target/eventstr-confchecking-osgi-1.1.jar"/>
                <include name="**/target/apm-verification-osgi-1.1.jar"/>
<!--                <include name="**/target/uma-bpdiff-osgi-1.1.jar"/>-->
                <include name="**/target/pn-automata-conv-osgi-1.1.jar"/>
                <include name="**/target/prom-pnml-osgi-1.1.jar"/>
                <include name="**/target/ltl-to-automaton-osgi-1.1.jar"/>
                <include name="**/target/declare-visualizer-osgi-1.1.jar"/>
            <!--<include name="**/target/pnapi-bpdiff-osgi-1.1.jar"/>-->
            <include name="**/target/raffaeleconforti-osgi-1.1.jar"/>
            <include name="**/target/ltl-conf-check-osgi-1.1.jar"/>
        </fileset>

        <!-- This bundle is a dependency for the eventstr-confchecking-code-osgi bundle, which is in turn used by Compare-Logic -->
            <fileset dir="Supplements/">
                <include name="org.apache.servicemix.bundles.gwt-dev-2.6.0_1.jar"/>
            </fileset>
        </copy>
        <copy todir="${dir-virgo}/repository/usr" flatten="true" overwrite="true">
            <fileset refid="usrRepo"/>
        </copy>
        <copy todir="${dir-virgo}/pickup" flatten="true" overwrite="true">
            <fileset refid="pickupRepoServer"/>
        </copy>

        <!-- Force the BPMN Miner plugin to be alphabetically after the iBPStruct plugin it depends upon -->
        <copy file="Apromore-Custom-Plugins/BPMNMiner-Logic/target/bpmnminer-logic-1.1.jar" tofile="${dir-virgo}/pickup/~bpmnminer-logic-1.1.jar"/>
        <copy file="Apromore-Custom-Plugins/BPMNMiner-Portal-Plugin/target/bpmnminer-portal-plugin-1.1.jar" tofile="${dir-virgo}/pickup/~bpmnminer-portal-plugin-1.1.jar"/>

        <!-- Force the editor plugins to be alphabetically after the logic plugins they depends upon -->
        <copy file="Apromore-Plugins/plugin-editor/ibpstruct/target/ibpstruct-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~ibpstruct-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/metrics/target/metrics-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~metrics-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/metrics2/target/metrics-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~metrics-editor-plugin2-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/bebop/target/gbebop-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~gbebop-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/bprove/target/gbprove-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~gbprove-editor-plugin-1.1.war"/>

        <!-- After creating the PQL tables in MySQL, uncomment this component to enable PQL indexing
        <copy file="Apromore-Custom-Plugins/PQL-Indexer-Portal-Plugin/target/pql-indexer-portal-plugin-1.1.jar" tofile="${dir-virgo}/pickup/~pql-indexer-portal-plugin-1.1.jar"/>
        -->

        <copy todir="${dir-virgo}/pickup" flatten="true" overwrite="true">
            <fileset dir="${dir-annotation}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-canoniser}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-logic-plugins}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-portal-plugins}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
                <exclude name="sample/target/*.jar"/>
            </fileset>
            <!--<fileset dir="${dir-deploy}">-->
                <!--<include name="**/target/*.jar"/>-->
                <!--<exclude name="**/target/*-sources.jar"/>-->
                <!--<exclude name="**/core/**/*.jar"/>-->
            <!--</fileset>-->
        </copy>

        <!-- PQL indexing bot -->
        <copy file="Apromore-Extras/PQLBot/target/pql-bot-1.2.one-jar.jar" tofile="${dir-virgo}/pql-bot.jar" overwrite="true"/>
    </target>

    <target name="copy-virgo" depends="clean-virgo">
        <copy file="Supplements/liblpsolve55.jnilib" tofile="${dir-virgo}/liblpsolve55.jnilib" overwrite="true"/>
        <copy file="Supplements/liblpsolve55.lib" tofile="${dir-virgo}/liblpsolve55.lib" overwrite="true"/>
        <copy file="Supplements/liblpsolve55d.lib" tofile="${dir-virgo}/liblpsolve55d.lib" overwrite="true"/>
        <copy file="Supplements/liblpsolve55j.jnilib" tofile="${dir-virgo}/liblpsolve55j.jnilib" overwrite="true"/>
        <copy file="Supplements/lpsolve55.lib" tofile="${dir-virgo}/lpsolve55.lib" overwrite="true"/>
		<copy file="Supplements/lpsolve55.dll" tofile="${dir-virgo}/lpsolve55.dll" overwrite="true"/>
		<copy file="Supplements/lpsolve55j.dll" tofile="${dir-virgo}/lpsolve55j.dll" overwrite="true"/>

        <copy todir="${dir-virgo}/repository/usr" flatten="true" overwrite="true">
            <fileset dir="${dir-osgi}">
                <include name="**/target/eclipse-collections-osgi-1.1.jar"/>
                <include name="**/target/bpmntk-osgi-1.1.jar"/>
                <include name="**/target/similaritysearch-osgi-1.1.jar"/>
                <include name="**/target/eventstr-confchecking-osgi-1.1.jar"/>
                <include name="**/target/apm-verification-osgi-1.1.jar"/>
<!--                <include name="**/target/uma-bpdiff-osgi-1.1.jar"/>-->
                <include name="**/target/pn-automata-conv-osgi-1.1.jar"/>
                <include name="**/target/prom-pnml-osgi-1.1.jar"/>
                <include name="**/target/ltl-to-automaton-osgi-1.1.jar"/>
                <include name="**/target/declare-visualizer-osgi-1.1.jar"/>
                <!--<include name="**/target/pnapi-bpdiff-osgi-1.1.jar"/>-->
                <include name="**/target/raffaeleconforti-osgi-1.1.jar"/>
                <include name="**/target/ltl-conf-check-osgi-1.1.jar"/>
                <!-- the PQL subsystem will add this, so it normally won't need to be done explicitly
                <include name="**/target/json-osgi-20090211.jar"/>
                -->
            </fileset>

            <!-- This bundle is a dependency for the eventstr-confchecking-code-osgi bundle, which is in turn used by Compare-Logic -->
            <fileset dir="Supplements/">
                <include name="org.apache.servicemix.bundles.gwt-dev-2.6.0_1.jar"/>
            </fileset>
        </copy>
        <copy todir="${dir-virgo}/repository/usr" flatten="true" overwrite="true">
            <fileset refid="usrRepo"/>
        </copy>
        <copy todir="${dir-virgo}/pickup" flatten="true" overwrite="true">
            <fileset refid="pickupRepo"/>
        </copy>

        <!-- Force the BPMN Miner plugin to be alphabetically after the iBPStruct plugin it depends upon -->
        <copy file="Apromore-Custom-Plugins/BPMNMiner-Logic/target/bpmnminer-logic-1.1.jar" tofile="${dir-virgo}/pickup/~bpmnminer-logic-1.1.jar"/>
        <copy file="Apromore-Custom-Plugins/BPMNMiner-Portal-Plugin/target/bpmnminer-portal-plugin-1.1.jar" tofile="${dir-virgo}/pickup/~bpmnminer-portal-plugin-1.1.jar"/>

        <!-- Force the editor plugins to be alphabetically after the logic plugins they depends upon -->
        <copy file="Apromore-Plugins/plugin-editor/ibpstruct/target/ibpstruct-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~ibpstruct-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/metrics/target/metrics-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~metrics-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/metrics2/target/metrics-editor-plugin2-1.1.war" tofile="${dir-virgo}/pickup/~metrics-editor-plugin2-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/bebop/target/gbebop-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~gbebop-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/bprove/target/gbprove-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~gbprove-editor-plugin-1.1.war"/>

        <!-- After creating the PQL tables in MySQL, uncomment this component to enable PQL indexing
        <copy file="Apromore-Custom-Plugins/PQL-Indexer-Portal-Plugin/target/pql-indexer-portal-plugin-1.1.jar" tofile="${dir-virgo}/pickup/~pql-indexer-portal-plugin-1.1.jar"/>
        -->

        <copy todir="${dir-virgo}/pickup" flatten="true" overwrite="true">
            <fileset dir="${dir-annotation}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-canoniser}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <!--<fileset dir="${dir-portal-templates}">-->
                <!--<include name="**/target/*.jar"/>-->
                <!--<exclude name="**/target/*-sources.jar"/>-->
                <!--<exclude name="**/core/**/*.jar"/>-->
            <!--</fileset>-->
            <fileset dir="${dir-logic-plugins}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-portal-plugins}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
                <exclude name="sample/target/*.jar"/>
            </fileset>
            <!--
            <fileset dir="${dir-editor-plugins}">
                <include name="**/target/*.war"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            -->
            <!--<fileset dir="${dir-deploy}">-->
                <!--<include name="**/target/*.jar"/>-->
                <!--<exclude name="**/target/*-sources.jar"/>-->
                <!--<exclude name="**/core/**/*.jar"/>-->
            <!--</fileset>-->
        </copy>

        <!-- PQL indexing bot -->
        <copy file="Apromore-Extras/PQLBot/target/pql-bot-1.2.one-jar.jar" tofile="${dir-virgo}/pql-bot.jar" overwrite="true"/>
    </target>

    <target name="copy-virgo-student" depends="clean-virgo">
        <copy file="Supplements/liblpsolve55.jnilib" tofile="${dir-virgo}/liblpsolve55.jnilib" overwrite="true"/>
        <copy file="Supplements/liblpsolve55.lib" tofile="${dir-virgo}/liblpsolve55.lib" overwrite="true"/>
        <copy file="Supplements/liblpsolve55d.lib" tofile="${dir-virgo}/liblpsolve55d.lib" overwrite="true"/>
        <copy file="Supplements/liblpsolve55j.jnilib" tofile="${dir-virgo}/liblpsolve55j.jnilib" overwrite="true"/>
        <copy file="Supplements/lpsolve55.lib" tofile="${dir-virgo}/lpsolve55.lib" overwrite="true"/>
		<copy file="Supplements/lpsolve55.dll" tofile="${dir-virgo}/lpsolve55.dll" overwrite="true"/>
		<copy file="Supplements/lpsolve55j.dll" tofile="${dir-virgo}/lpsolve55j.dll" overwrite="true"/>

        <copy todir="${dir-virgo}/repository/usr" flatten="true" overwrite="true">
            <fileset dir="${dir-osgi}">
                <include name="**/target/eclipse-collections-osgi-1.1.jar"/>
                <include name="**/target/bpmntk-osgi-1.1.jar"/>
                <include name="**/target/similaritysearch-osgi-1.1.jar"/>
                <include name="**/target/eventstr-confchecking-osgi-1.1.jar"/>
                <include name="**/target/apm-verification-osgi-1.1.jar"/>
<!--                <include name="**/target/uma-bpdiff-osgi-1.1.jar"/>-->
                <include name="**/target/pn-automata-conv-osgi-1.1.jar"/>
                <include name="**/target/prom-pnml-osgi-1.1.jar"/>
                <include name="**/target/ltl-to-automaton-osgi-1.1.jar"/>
                <include name="**/target/declare-visualizer-osgi-1.1.jar"/>
                <!--<include name="**/target/pnapi-bpdiff-osgi-1.1.jar"/>-->
                <include name="**/target/raffaeleconforti-osgi-1.1.jar"/>
                <include name="**/target/ltl-conf-check-osgi-1.1.jar"/>
                <!-- the PQL subsystem will add this, so it normally won't need to be done explicitly
                <include name="**/target/json-osgi-20090211.jar"/>
                -->
            </fileset>

            <!-- This bundle is a dependency for the eventstr-confchecking-code-osgi bundle, which is in turn used by Compare-Logic -->
            <fileset dir="Supplements/">
                <include name="org.apache.servicemix.bundles.gwt-dev-2.6.0_1.jar"/>
            </fileset>
        </copy>
        <copy todir="${dir-virgo}/repository/usr" flatten="true" overwrite="true">
            <fileset refid="usrRepo"/>
        </copy>
        <copy todir="${dir-virgo}/pickup" flatten="true" overwrite="true">
            <fileset refid="pickupRepo-student"/>
        </copy>

        <!-- Force the BPMN Miner plugin to be alphabetically after the iBPStruct plugin it depends upon -->
        <copy file="Apromore-Custom-Plugins/BPMNMiner-Logic/target/bpmnminer-logic-1.1.jar" tofile="${dir-virgo}/pickup/~bpmnminer-logic-1.1.jar"/>
        <copy file="Apromore-Custom-Plugins/BPMNMiner-Portal-Plugin/target/bpmnminer-portal-plugin-1.1.jar" tofile="${dir-virgo}/pickup/~bpmnminer-portal-plugin-1.1.jar"/>

        <!-- Force the editor plugins to be alphabetically after the logic plugins they depends upon -->
        <copy file="Apromore-Plugins/plugin-editor/metrics2/target/metrics-editor-plugin2-1.1.war" tofile="${dir-virgo}/pickup/~metrics-editor-plugin2-1.1.war"/>
        <!-- Switch off Signavio-based plugins
        <copy file="Apromore-Plugins/plugin-editor/ibpstruct/target/ibpstruct-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~ibpstruct-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/metrics/target/metrics-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~metrics-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/bebop/target/gbebop-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~gbebop-editor-plugin-1.1.war"/>
        <copy file="Apromore-Plugins/plugin-editor/bprove/target/gbprove-editor-plugin-1.1.war" tofile="${dir-virgo}/pickup/~gbprove-editor-plugin-1.1.war"/>
        -->

        <!-- After creating the PQL tables in MySQL, uncomment this component to enable PQL indexing
        <copy file="Apromore-Custom-Plugins/PQL-Indexer-Portal-Plugin/target/pql-indexer-portal-plugin-1.1.jar" tofile="${dir-virgo}/pickup/~pql-indexer-portal-plugin-1.1.jar"/>
        -->

        <copy todir="${dir-virgo}/pickup" flatten="true" overwrite="true">
            <fileset dir="${dir-annotation}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-canoniser}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <!--<fileset dir="${dir-portal-templates}">-->
                <!--<include name="**/target/*.jar"/>-->
                <!--<exclude name="**/target/*-sources.jar"/>-->
                <!--<exclude name="**/core/**/*.jar"/>-->
            <!--</fileset>-->
            <fileset dir="${dir-logic-plugins}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            <fileset dir="${dir-portal-plugins}">
                <include name="**/target/*.jar"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
                <exclude name="sample/target/*.jar"/>
            </fileset>
            <!--
            <fileset dir="${dir-editor-plugins}">
                <include name="**/target/*.war"/>
                <exclude name="**/target/*-sources.jar"/>
                <exclude name="**/core/**/*.jar"/>
            </fileset>
            -->
            <!--<fileset dir="${dir-deploy}">-->
                <!--<include name="**/target/*.jar"/>-->
                <!--<exclude name="**/target/*-sources.jar"/>-->
                <!--<exclude name="**/core/**/*.jar"/>-->
            <!--</fileset>-->
        </copy>

        <!-- PQL indexing bot -->
        <copy file="Apromore-Extras/PQLBot/target/pql-bot-1.2.one-jar.jar" tofile="${dir-virgo}/pql-bot.jar" overwrite="true"/>
    </target>

    <target name="create-h2">
        <delete>
            <fileset dir="Apromore-Assembly" includes="Manager-Repository.*"/>
        </delete>
        <java classname="org.h2.tools.RunScript">
            <classpath>
                <pathelement location="Apromore-Assembly/Portal-Assembly/target/repository/usr/h2-1.2.128.jar"/>
            </classpath>
            <arg value="-url"/>
            <arg value="jdbc:h2:Apromore-Assembly/Manager-Repository"/>
            <arg value="-script"/>
            <arg file="Apromore-Core-Components/Apromore-Manager/src/test/resources/database/db-h2.sql"/>
        </java>
        <java classname="org.h2.tools.RunScript">
            <classpath>
                <pathelement location="Apromore-Assembly/Portal-Assembly/target/repository/usr/h2-1.2.128.jar"/>
            </classpath>
            <arg value="-url"/>
            <arg value="jdbc:h2:Apromore-Assembly/Manager-Repository"/>
            <arg value="-script"/>
            <arg file="Apromore-Core-Components/Apromore-Manager/src/test/resources/database/db-data.sql"/>
        </java>
    </target>

    <target name="cpf-importer-uptodate">
        <uptodate property="cpf-importer.uptodate" targetfile="Supplements/cpfImporter/target/cpfImporter-1.1.one-jar.jar">
            <srcfiles dir="Supplements/cpfImporter/src/main"/>
        </uptodate>
    </target>

    <target name="cpf-importer" depends="cpf-importer-uptodate" unless="cpf-importer.uptodate">
        <exec dir="Supplements/cpfImporter" executable="mvn">
            <arg value="package"/>
        </exec>
    </target>

    <target name="install-sample-data" depends="cpf-importer">
        <java jar="Supplements/cpfImporter/target/cpfImporter-1.1.one-jar.jar" fork="yes">
            <arg value="-manager"/> <arg value="http://localhost:9000/manager/services/manager"/>

            <!-- Configurable BPMN samples -->
            <arg value="-from"/>    <arg value="Apromore-Extras/bpmncmap/src/test/resources"/>
            <arg value="-to"/>      <arg value="airport"/>
            <arg value="International departure.bpmn"/>
            <arg value="1 Terminal entry.bpmn"/>
            <arg value="1x Manage LAGs in belongings.bpmn"/>
            <arg value="2 Check-in.bpmn"/>
            <arg value="2x Finalise Check-in.bpmn"/>
            <arg value="2x Get restricted items checked.bpmn"/>
            <arg value="2x Get tourist refund items checked.bpmn"/>
            <arg value="2x Perform baggage check in.bpmn"/>
            <arg value="2x Perform preliminary check in.bpmn"/>
            <arg value="2x Request change of name.bpmn"/>
            <arg value="3 Security.bpmn"/>
            <arg value="3x Undergo Secondary screening.bpmn"/>
            <arg value="3x Undergo preparation.bpmn"/>
            <arg value="3x Undergo security checks.bpmn"/>
            <arg value="4 Customs and Immigration.bpmn"/>
            <arg value="4x Evaluate Validity.bpmn"/>
            <arg value="4x Undergo customs and immigration checks.bpmn"/>
            <arg value="5 Boarding.bpmn"/>
            <arg value="5x Proceed through boarding checks.bpmn"/>
            <arg value="6 Travel document acquisition.bpmn"/>
            <arg value="7 LAGs.bpmn"/>
            <arg value="91 Discretionary experience 1.bpmn"/>
            <arg value="92 Discretionary experience 2.bpmn"/>
            <arg value="93 Discretionary experience 3.bpmn"/>
            <arg value="94 Discretionary experience 4.bpmn"/>

            <!-- PQL samples -->
            <!--<arg value="-from"/> <arg value="Supplements/samples/pql"/>-->
            <!--<arg value="-to"/>   <arg value="pql"/>-->
            <!--<arg value="1.pnml"/>-->
            <!--<arg value="2.pnml"/>-->
            <!--<arg value="3.pnml"/>-->
            <!--<arg value="4.pnml"/>-->
            <!--<arg value="5.pnml"/>-->
            <!--<arg value="6.pnml"/>-->
            <!--<arg value="7.pnml"/>-->
            <!--<arg value="8.pnml"/>-->
            <!--<arg value="9.pnml"/>-->
            <!--<arg value="10.pnml"/>-->

            <!-- Log animation samples -->
            <arg value="-from"/> <arg value="Supplements/samples/repairExample"/>
            <arg value="-to"/>   <arg value="repair"/>
            <arg value="repairExample.bpmn"/>
            <arg value="RepairExample20140901103825.mxml"/>
            <arg value="repairExample_complete_lifecycle_only.xes"/>
        </java>
        <copy todir="Apromore-Assembly/Filestore-Repository" overwrite="yes" verbose="true">
            <!-- Configurable BPMN samples -->
            <fileset dir="Apromore-Extras/bpmncmap/src/test/resources">
                <include name="*.cmap"/>
                <include name="*.qml"/>
            </fileset>
        </copy>
    </target>

    <target name="install-comparison-data" depends="cpf-importer">
        <java jar="Supplements/cpfImporter/target/cpfImporter-1.1.one-jar.jar" fork="yes">
            <arg value="-manager"/> <arg value="http://localhost:9000/manager/services/manager"/>

            <!-- Model to model -->
            <arg value="-from"/>    <arg value="Supplements/samples/model-to-model"/>
            <arg value="-to"/>      <arg value="Compare/Model to Model"/>
            <arg value="Model1.bpmn"/>
            <arg value="Model2.bpmn"/>

            <!-- Model to log -->
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/CAUSCONC-1"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/CAUSCONC-1"/>
            <arg value="bp3.bpmn"/>
            <arg value="bpLog3.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/CAUSCONC-2"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/CAUSCONC-2"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog4.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/CONFLICT-1"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/CONFLICT-1"/>
            <arg value="bp5.bpmn"/>
            <arg value="bpLog4.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/CONFLICT-2"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/CONFLICT-2"/>
            <arg value="bp3.bpmn"/>
            <arg value="bpLog5.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/CONFLICT-3"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/CONFLICT-3"/>
            <arg value="bp5.bpmn"/>
            <arg value="bpLog3.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/CONFLICT-4"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/CONFLICT-4"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog5.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/TASKABS-1"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/TASKABS-1"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog12.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/TASKABS-2"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/TASKABS-2"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog2.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/TASKABS-3"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/TASKABS-3"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog3B.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/TASKABS-4"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/TASKABS-4"/>
            <arg value="bp4.bpmn"/>
            <arg value="bpLog3.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/TASKRELOC-1"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/TASKRELOC-1"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog10.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/TASKSKIP-1"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/TASKSKIP-1"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog11.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/TASKSKIP-2"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/TASKSKIP-2"/>
            <arg value="bp6.bpmn"/>
            <arg value="bpLog3.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/TASKSUB"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/TASKSUB"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog9.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/UNMREPETITION"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/UNMREPETITION"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog8.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/UNOBSACYCLICINTER"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/UNOBSACYCLICINTER"/>
            <arg value="bp2.bpmn"/>
            <arg value="bpLog2.xes"/>
            <arg value="-from"/>    <arg value="Apromore-Custom-Plugins/Compare-Logic/src/test/resources/UNOBSCYCLICINTER"/>
            <arg value="-to"/>      <arg value="Compare/Model to Log/UNOBSCYCLICINTER"/>
            <arg value="bp.bpmn"/>
            <arg value="bpLog.xes"/>
        </java>
    </target>
</project>
